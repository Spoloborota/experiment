# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è goose –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å goose:**
   - –î–æ–±–∞–≤–ª–µ–Ω `github.com/pressly/goose/v3 v3.23.1` –≤ go.mod

2. **–ö–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:**
   - –ù–æ–≤—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª: `cmd/migrations/main.go`
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ goose

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Makefile:**
   - `make migrate` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
   - `make migrate-create name=<name>` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é  
   - `make migrate-down` - –æ—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
   - `make migrate-status` - —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
   - `make migrate-reset` - —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
   - `make migrate-version` - –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é –ë–î

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –û–±–Ω–æ–≤–ª–µ–Ω README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ goose
   - –°–æ–∑–¥–∞–Ω MIGRATION_GUIDE.md —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º
   - –û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (–¥–æ–±–∞–≤–ª–µ–Ω goose)

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ

1. **Docker-compose:**
   - –£–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ goose –∫–æ–º–∞–Ω–¥—ã

2. **–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç `docker-compose up -d` –∏ `make migrate`
   - Makefile –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `cmd/migrations/`
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤ `migrations/` –Ω–æ —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ goose

### üóÇÔ∏è –§–∞–π–ª—ã

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `cmd/migrations/main.go` - –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- `MIGRATION_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º  
- `CHANGES.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `go.mod` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å goose
- `Makefile` - –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–π
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ 
- `docker-compose.yml` - —É–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- `.gitignore` - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
```bash
# 1. –ó–∞–ø—É—Å–∫ PostgreSQL
docker-compose up -d

# 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π  
make migrate

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make migrate-status
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
make migrate-create name=add_user_avatar
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª migrations/TIMESTAMP_add_user_avatar.sql
make migrate
```

### –ü—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
go run cmd/migrations/main.go up
go run cmd/migrations/main.go status
go run cmd/migrations/main.go create new_table
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- üéØ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏** —Å –ø–æ–º–æ—â—å—é –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ goose
- üîÑ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞** –º–∏–≥—Ä–∞—Ü–∏–π 
- üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- üõ†Ô∏è **–£–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** —á–µ—Ä–µ–∑ Makefile
- üìö **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚öôÔ∏è **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π** –ø—Ä–æ–µ–∫—Ç–∞

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–∏–≥—Ä–∞—Ü–∏—è `001_init.sql` —É–∂–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç goose
- –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ 